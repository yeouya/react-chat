{"version":3,"sources":["components/AuthForm.module.css","components/Message.module.css","components/ChatForm.module.css","pages/Home.module.css","common/Loading.module.css","components/AuthFormChange.module.css","pages/Auth.module.css","components/ChatHeader.module.css","firebase.ts","contexts/AuthContext.tsx","common/Loading.tsx","hooks/useInput.ts","components/AuthForm.tsx","components/AuthFormChange.tsx","pages/Auth.tsx","components/ChatHeader.tsx","components/Message.tsx","components/ChatForm.tsx","pages/Home.tsx","App.tsx","index.tsx"],"names":["module","exports","firebaseConfig","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","REACT_APP_MESSAGING_SENDER_ID","appId","firebase","initializeApp","auth","firestore","googleAuthProvider","GoogleAuthProvider","AuthContext","createContext","AuthProvider","children","useState","user","setUser","init","setInit","useEffect","onAuthStateChanged","Provider","value","useAuthContext","context","useContext","ReferenceError","Loading","className","style","initWrapper","wrapper","useInput","initialValue","setValue","handleChange","target","bindValue","onChange","AuthForm","signIn","bindNickname","bindEmail","bindPassword","handleGoogleAuth","error","restProps","form","heading","fieldset","input","type","title","placeholder","pattern","maxLength","required","buttons","button","or","onClick","fontSize","AuthFormChange","handleFormChange","paragraph","Auth","nickname","setNickname","email","setEmail","password","setPassword","setSignIn","setError","handleSubmit","event","a","preventDefault","signInWithEmailAndPassword","trim","createUserWithEmailAndPassword","userCredential","updateProfile","displayName","console","message","signInWithPopup","container","onSubmit","prev","ChatHeader","header","signOut","Message","text","createdAt","photoURL","name","self","img","src","alt","icon","article","timestamp","ChatForm","setText","bindText","collection","add","creatorId","uid","Date","toLocaleTimeString","slice","FieldValue","serverTimestamp","Home","messages","setMessages","chatRef","useRef","loading","setLoading","orderBy","onSnapshot","next","docs","map","doc","id","data","chat","current","scrollHeight","clientHeight","scrollTop","timeoutId","setTimeout","clearTimeout","main","ref","mainInner","App","path","exact","render","document","querySelector"],"mappings":"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","file":"static/js/main.eba2b796.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"heading\":\"AuthForm_heading__1Fqow\",\"form\":\"AuthForm_form__3HH-n\",\"fieldset\":\"AuthForm_fieldset__1bD81\",\"input\":\"AuthForm_input___m9TU\",\"error\":\"AuthForm_error__3KG1O\",\"buttons\":\"AuthForm_buttons__3MJPb\",\"button\":\"AuthForm_button__Q45iR\",\"or\":\"AuthForm_or__1Bitl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Message_wrapper__XLNOk\",\"self\":\"Message_self__T4uYr\",\"img\":\"Message_img__1vPci\",\"icon\":\"Message_icon__1gjD6\",\"article\":\"Message_article__3a5dv\",\"text\":\"Message_text__1lgB_\",\"timestamp\":\"Message_timestamp__2pQW2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ChatForm_form__3UEKa\",\"input\":\"ChatForm_input__29Bjd\",\"button\":\"ChatForm_button__1jdXm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Home_wrapper__22Z_i\",\"container\":\"Home_container__2SMUn\",\"main\":\"Home_main__1DH76\",\"mainInner\":\"Home_mainInner__3881h\",\"error\":\"Home_error__PHyps\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"initWrapper\":\"Loading_initWrapper__3MIeM\",\"wrapper\":\"Loading_wrapper__3NyWL\",\"rotation\":\"Loading_rotation__1yngR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paragraph\":\"AuthFormChange_paragraph__1ELbn\",\"button\":\"AuthFormChange_button__1sCf6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Auth_wrapper__ExtCq\",\"container\":\"Auth_container__mFxJ7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"ChatHeader_header__1eczV\",\"button\":\"ChatHeader_button__115PY\"};","import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nconst auth = firebase.auth();\r\nconst firestore = firebase.firestore();\r\nconst googleAuthProvider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport { firebase, auth, firestore, googleAuthProvider };\r\n","import { createContext, useState, useEffect, useContext } from \"react\";\r\nimport { firebase, auth } from \"../firebase\";\r\nimport { Props } from \"../types\";\r\n\r\ntype User = firebase.User | null;\r\n\r\ninterface Context {\r\n  user: User;\r\n  init: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<Context | null>(null);\r\n\r\nexport default function AuthProvider({ children }: Props) {\r\n  const [user, setUser] = useState<User>(null);\r\n  const [init, setInit] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        setUser(user);\r\n      } else {\r\n        setUser(null);\r\n      }\r\n      setInit(false);\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, init }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useAuthContext = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new ReferenceError(\"AuthProvider 컴포넌트를 찾을 수 없습니다.\");\r\n  }\r\n  return context;\r\n};\r\n","import style from \"./Loading.module.css\";\r\n\r\ninterface LoadingProps {\r\n  init?: boolean;\r\n}\r\n\r\nexport default function Loading({ init }: LoadingProps) {\r\n  return (\r\n    <div className={init ? style.initWrapper : style.wrapper}>\r\n      {init && \"Initialize...\"}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, Dispatch, SetStateAction, ChangeEvent } from \"react\";\r\n\r\nexport interface BindValue {\r\n  value: string;\r\n  onChange(event: ChangeEvent<HTMLInputElement>): void;\r\n}\r\n\r\ntype UseInput = [string, Dispatch<SetStateAction<string>>, BindValue];\r\n\r\nexport default function useInput(initialValue = \"\"): UseInput {\r\n  const [value, setValue] = useState(initialValue);\r\n\r\n  const handleChange = ({\r\n    target: { value },\r\n  }: ChangeEvent<HTMLInputElement>) => {\r\n    setValue(value);\r\n  };\r\n\r\n  const bindValue = { value, onChange: handleChange };\r\n\r\n  return [value, setValue, bindValue];\r\n}\r\n","import { HTMLAttributes } from \"react\";\r\nimport { BindValue } from \"../hooks/useInput\";\r\nimport { FcGoogle } from \"react-icons/fc\";\r\nimport style from \"./AuthForm.module.css\";\r\n\r\ninterface AuthFormProps extends HTMLAttributes<HTMLFormElement> {\r\n  signIn: boolean;\r\n  bindNickname: BindValue;\r\n  bindEmail: BindValue;\r\n  bindPassword: BindValue;\r\n  handleGoogleAuth(): void;\r\n  error: string;\r\n}\r\n\r\nexport default function AuthForm({\r\n  signIn,\r\n  bindNickname,\r\n  bindEmail,\r\n  bindPassword,\r\n  handleGoogleAuth,\r\n  error,\r\n  ...restProps\r\n}: AuthFormProps) {\r\n  return (\r\n    <form className={style.form} {...restProps}>\r\n      <h1 className={style.heading}>React Chat</h1>\r\n      <fieldset className={style.fieldset}>\r\n        {!signIn && (\r\n          <input\r\n            className={style.input}\r\n            type=\"text\"\r\n            title=\"닉네임 (영문 대소문자, 한글 사용 가능)\"\r\n            placeholder=\"닉네임\"\r\n            pattern=\"^[a-zA-Z가-힣]+$\"\r\n            maxLength={8}\r\n            required\r\n            {...bindNickname}\r\n          />\r\n        )}\r\n        <input\r\n          className={style.input}\r\n          type=\"email\"\r\n          title=\"이메일\"\r\n          placeholder=\"이메일\"\r\n          required\r\n          {...bindEmail}\r\n        />\r\n        <input\r\n          className={style.input}\r\n          type=\"password\"\r\n          title=\"비밀번호\"\r\n          placeholder=\"비밀번호\"\r\n          required\r\n          {...bindPassword}\r\n        />\r\n      </fieldset>\r\n      {error && <p className={style.error}>{error}</p>}\r\n      <div className={style.buttons}>\r\n        <button className={style.button} type=\"submit\">\r\n          {signIn ? \"로그인\" : \"회원가입\"}\r\n        </button>\r\n        {signIn && (\r\n          <>\r\n            <p className={style.or}>또는</p>\r\n            <button\r\n              className={style.button}\r\n              type=\"button\"\r\n              onClick={handleGoogleAuth}\r\n            >\r\n              <FcGoogle fontSize=\"2.2rem\" />\r\n              Google 계정으로 로그인\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","import style from \"./AuthFormChange.module.css\";\r\n\r\ninterface AuthFormChangeProps {\r\n  signIn: boolean;\r\n  handleFormChange(): void;\r\n}\r\n\r\nexport default function AuthFormChange({\r\n  signIn,\r\n  handleFormChange,\r\n}: AuthFormChangeProps) {\r\n  return (\r\n    <p className={style.paragraph}>\r\n      {signIn ? \"계정이 없으신가요?\" : \"계정이 있으신가요?\"}\r\n      <button className={style.button} type=\"button\" onClick={handleFormChange}>\r\n        {signIn ? \"회원가입\" : \"로그인\"}\r\n      </button>\r\n    </p>\r\n  );\r\n}\r\n","import { useState, FormEvent } from \"react\";\r\nimport useInput from \"../hooks/useInput\";\r\nimport { auth, googleAuthProvider } from \"../firebase\";\r\nimport AuthForm from \"../components/AuthForm\";\r\nimport AuthFormChange from \"../components/AuthFormChange\";\r\nimport style from \"./Auth.module.css\";\r\n\r\nexport default function Auth() {\r\n  const [nickname, setNickname, bindNickname] = useInput();\r\n  const [email, setEmail, bindEmail] = useInput();\r\n  const [password, setPassword, bindPassword] = useInput();\r\n  const [signIn, setSignIn] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    try {\r\n      if (signIn) {\r\n        await auth.signInWithEmailAndPassword(email, password);\r\n      } else {\r\n        if (!nickname.trim()) {\r\n          return;\r\n        }\r\n        const userCredential = await auth.createUserWithEmailAndPassword(\r\n          email,\r\n          password\r\n        );\r\n        userCredential.user?.updateProfile({\r\n          displayName: nickname,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  const handleGoogleAuth = async () => {\r\n    try {\r\n      await auth.signInWithPopup(googleAuthProvider);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  const handleFormChange = () => {\r\n    setSignIn((prev) => !prev);\r\n    setNickname(\"\");\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n    setError(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className={style.wrapper}>\r\n      <div className={style.container}>\r\n        <AuthForm\r\n          onSubmit={handleSubmit}\r\n          signIn={signIn}\r\n          bindNickname={bindNickname}\r\n          bindEmail={bindEmail}\r\n          bindPassword={bindPassword}\r\n          handleGoogleAuth={handleGoogleAuth}\r\n          error={error}\r\n        />\r\n        <AuthFormChange signIn={signIn} handleFormChange={handleFormChange} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { auth } from \"../firebase\";\r\nimport { MdExitToApp } from \"react-icons/md\";\r\nimport style from \"./ChatHeader.module.css\";\r\n\r\nexport default function ChatHeader() {\r\n  const handleLogout = () => {\r\n    auth.signOut();\r\n  };\r\n\r\n  return (\r\n    <header className={style.header}>\r\n      <button className={style.button} onClick={handleLogout}>\r\n        <MdExitToApp />\r\n      </button>\r\n    </header>\r\n  );\r\n}\r\n","import { MdAccountCircle } from \"react-icons/md\";\r\nimport style from \"./Message.module.css\";\r\n\r\ninterface MessageProps {\r\n  message: {\r\n    text: string;\r\n    createdAt: string;\r\n    photoURL: string;\r\n    name: string;\r\n  };\r\n  self?: boolean;\r\n}\r\n\r\nexport default function Message({\r\n  message: { text, createdAt, photoURL, name },\r\n  self,\r\n}: MessageProps) {\r\n  return (\r\n    <>\r\n      <div className={`${style.wrapper} ${self && style.self}`}>\r\n        {!self && (\r\n          <>\r\n            {photoURL ? (\r\n              <img className={style.img} src={photoURL} alt=\"프로필 이미지\" />\r\n            ) : (\r\n              <MdAccountCircle className={style.icon} />\r\n            )}\r\n            <p>{name}</p>\r\n          </>\r\n        )}\r\n        <article className={style.article}>\r\n          <p className={`${style.text} ${self && style.self}`}>{text}</p>\r\n          <span className={style.timestamp}>{createdAt}</span>\r\n        </article>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import { FormEvent } from \"react\";\r\nimport useInput from \"../hooks/useInput\";\r\nimport { useAuthContext } from \"../contexts/AuthContext\";\r\nimport { firebase, firestore } from \"../firebase\";\r\nimport { MdAdd, MdInsertEmoticon } from \"react-icons/md\";\r\nimport { HiOutlineHashtag } from \"react-icons/hi\";\r\nimport { SetState } from \"../types\";\r\nimport style from \"./ChatForm.module.css\";\r\n\r\ninterface ChatFormProps {\r\n  setError: SetState<string>;\r\n}\r\n\r\nexport default function ChatForm({ setError }: ChatFormProps) {\r\n  const [text, setText, bindText] = useInput();\r\n  const { user } = useAuthContext();\r\n\r\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    if (!text.trim()) {\r\n      return;\r\n    }\r\n    setText(\"\");\r\n    try {\r\n      await firestore.collection(\"messages\").add({\r\n        creatorId: user?.uid,\r\n        createdAt: new Date().toLocaleTimeString().slice(0, -3),\r\n        name: user?.displayName,\r\n        text,\r\n        photoURL: user?.photoURL,\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      console.error(error);\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className={style.form} onSubmit={handleSubmit}>\r\n      <button className={style.button} type=\"button\">\r\n        <MdAdd />\r\n      </button>\r\n      <input className={style.input} type=\"text\" {...bindText} />\r\n      <button className={style.button} type=\"button\">\r\n        <MdInsertEmoticon />\r\n      </button>\r\n      <button className={style.button} type=\"button\">\r\n        <HiOutlineHashtag />\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { useAuthContext } from \"../contexts/AuthContext\";\r\nimport { firestore } from \"../firebase\";\r\nimport Loading from \"../common/Loading\";\r\nimport ChatHeader from \"../components/ChatHeader\";\r\nimport Message from \"../components/Message\";\r\nimport ChatForm from \"../components/ChatForm\";\r\nimport style from \"./Home.module.css\";\r\n\r\nexport default function Home() {\r\n  const [messages, setMessages] = useState<any[]>([]);\r\n  const chatRef = useRef<HTMLElement>(null);\r\n  const { user } = useAuthContext();\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = firestore\r\n      .collection(\"messages\")\r\n      .orderBy(\"timestamp\", \"asc\")\r\n      .onSnapshot({\r\n        next({ docs }) {\r\n          setMessages(docs.map((doc) => ({ id: doc.id, ...doc.data() })));\r\n          setLoading(false);\r\n        },\r\n        error(error) {\r\n          console.error(error);\r\n          setError(error.message);\r\n        },\r\n      });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const chat = chatRef.current;\r\n    if (chat) {\r\n      const { scrollHeight, clientHeight } = chat;\r\n      chat.scrollTop = scrollHeight - clientHeight;\r\n    }\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      setError(\"\");\r\n    }, 5000);\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n    };\r\n  }, [error]);\r\n\r\n  return loading ? (\r\n    <Loading />\r\n  ) : (\r\n    <div className={style.wrapper}>\r\n      <div className={style.container}>\r\n        <ChatHeader />\r\n        <main className={style.main} ref={chatRef}>\r\n          <div className={style.mainInner}>\r\n            {messages.map((message) => {\r\n              const { id, creatorId } = message;\r\n              if (user?.uid === creatorId) {\r\n                return <Message key={id} message={message} self />;\r\n              } else {\r\n                return <Message key={id} message={message} />;\r\n              }\r\n            })}\r\n          </div>\r\n        </main>\r\n        {error && <p className={style.error}>{error}</p>}\r\n        <ChatForm setError={setError} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useAuthContext } from \"./contexts/AuthContext\";\r\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport Loading from \"./common/Loading\";\r\nimport Auth from \"./pages/Auth\";\r\nimport Home from \"./pages/Home\";\r\n\r\nexport default function App() {\r\n  const { user, init } = useAuthContext();\r\n\r\n  return init ? (\r\n    <Loading init />\r\n  ) : (\r\n    <Router>\r\n      <Switch>\r\n        <Route path=\"/\" exact>\r\n          {!user ? <Auth /> : <Home />}\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n","import { StrictMode } from \"react\";\nimport { render } from \"react-dom\";\nimport \"./index.css\";\nimport AuthProvider from \"./contexts/AuthContext\";\nimport App from \"./App\";\n\nrender(\n  <StrictMode>\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  </StrictMode>,\n  document.querySelector(\"#root\")\n);\n"],"sourceRoot":""}