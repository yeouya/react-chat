(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{15:function(e,t,a){e.exports={heading:"AuthForm_heading__1Fqow",form:"AuthForm_form__3HH-n",fieldset:"AuthForm_fieldset__1bD81",input:"AuthForm_input___m9TU",error:"AuthForm_error__3KG1O",buttons:"AuthForm_buttons__3MJPb",button:"AuthForm_button__Q45iR",or:"AuthForm_or__1Bitl"}},17:function(e,t,a){e.exports={wrapper:"Message_wrapper__XLNOk",self:"Message_self__T4uYr",img:"Message_img__1vPci",icon:"Message_icon__1gjD6",article:"Message_article__3a5dv",text:"Message_text__1lgB_",timestamp:"Message_timestamp__2pQW2"}},23:function(e,t,a){e.exports={form:"ChatForm_form__3UEKa",input:"ChatForm_input__29Bjd",button:"ChatForm_button__1jdXm"}},24:function(e,t,a){e.exports={wrapper:"Home_wrapper__22Z_i",container:"Home_container__2SMUn",main:"Home_main__1DH76",mainInner:"Home_mainInner__3881h",error:"Home_error__PHyps"}},30:function(e,t,a){e.exports={initWrapper:"Loading_initWrapper__3MIeM",wrapper:"Loading_wrapper__3NyWL",rotation:"Loading_rotation__1yngR"}},31:function(e,t,a){e.exports={paragraph:"AuthFormChange_paragraph__1ELbn",button:"AuthFormChange_button__1sCf6"}},32:function(e,t,a){e.exports={wrapper:"Auth_wrapper__ExtCq",container:"Auth_container__mFxJ7"}},33:function(e,t,a){e.exports={header:"ChatHeader_header__1eczV",button:"ChatHeader_button__115PY"}},47:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a(37),c=(a(47),a(9)),s=a(22),i=(a(48),a(58),{apiKey:"AIzaSyCpk1fghCI8e5prtmLnV4viehFj2vrP1os",authDomain:"react-chat-d2d88.firebaseapp.com",projectId:"react-chat-d2d88",storageBucket:"react-chat-d2d88.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/react-chat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyCpk1fghCI8e5prtmLnV4viehFj2vrP1os",REACT_APP_APP_ID:"1:1086949840398:web:16c92bf4a88d7d43cd8e5f",REACT_APP_AUTH_DOMAIN:"react-chat-d2d88.firebaseapp.com",REACT_APP_NESSAGING_SENDER_ID:"1086949840398",REACT_APP_PROJECT_ID:"react-chat-d2d88",REACT_APP_STORAGE_BUCKET:"react-chat-d2d88.appspot.com"}).REACT_APP_MESSAGING_SENDER_ID,appId:"1:1086949840398:web:16c92bf4a88d7d43cd8e5f"});s.a.initializeApp(i);var o=s.a.auth(),u=s.a.firestore(),l=new s.a.auth.GoogleAuthProvider,j=a(2),b=Object(r.createContext)(null);function d(e){var t=e.children,a=Object(r.useState)(null),n=Object(c.a)(a,2),s=n[0],i=n[1],u=Object(r.useState)(!0),l=Object(c.a)(u,2),d=l[0],p=l[1];return Object(r.useEffect)((function(){return o.onAuthStateChanged((function(e){i(e||null),p(!1)}))}),[]),Object(j.jsx)(b.Provider,{value:{user:s,init:d},children:t})}var p=function(){var e=Object(r.useContext)(b);if(!e)throw new ReferenceError("AuthProvider \ucef4\ud3ec\ub10c\ud2b8\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");return e},m=a(40),_=a(6),h=a(30),O=a.n(h);function f(e){var t=e.init;return Object(j.jsx)("div",{className:t?O.a.initWrapper:O.a.wrapper,children:t&&"Initialize..."})}var x=a(18),v=a.n(x),g=a(26);function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(r.useState)(e),a=Object(c.a)(t,2),n=a[0],s=a[1],i=function(e){var t=e.target.value;s(t)},o={value:n,onChange:i};return[n,s,o]}var N=a(16),E=a(42),P=a(38),C=a(15),S=a.n(C);function w(e){var t=e.signIn,a=e.bindNickname,r=e.bindEmail,n=e.bindPassword,c=e.handleGoogleAuth,s=e.error,i=Object(E.a)(e,["signIn","bindNickname","bindEmail","bindPassword","handleGoogleAuth","error"]);return Object(j.jsxs)("form",Object(N.a)(Object(N.a)({className:S.a.form},i),{},{children:[Object(j.jsx)("h1",{className:S.a.heading,children:"React Chat"}),Object(j.jsxs)("fieldset",{className:S.a.fieldset,children:[!t&&Object(j.jsx)("input",Object(N.a)({className:S.a.input,type:"text",title:"\ub2c9\ub124\uc784 (\uc601\ubb38 \ub300\uc18c\ubb38\uc790, \ud55c\uae00 \uc0ac\uc6a9 \uac00\ub2a5)",placeholder:"\ub2c9\ub124\uc784",pattern:"^[a-zA-Z\uac00-\ud7a3]+$",maxLength:8,required:!0},a)),Object(j.jsx)("input",Object(N.a)({className:S.a.input,type:"email",title:"\uc774\uba54\uc77c",placeholder:"\uc774\uba54\uc77c",required:!0},r)),Object(j.jsx)("input",Object(N.a)({className:S.a.input,type:"password",title:"\ube44\ubc00\ubc88\ud638",placeholder:"\ube44\ubc00\ubc88\ud638",required:!0},n))]}),s&&Object(j.jsx)("p",{className:S.a.error,children:s}),Object(j.jsxs)("div",{className:S.a.buttons,children:[Object(j.jsx)("button",{className:S.a.button,type:"submit",children:t?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785"}),t&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{className:S.a.or,children:"\ub610\ub294"}),Object(j.jsxs)("button",{className:S.a.button,type:"button",onClick:c,children:[Object(j.jsx)(P.a,{fontSize:"2.2rem"}),"Google \uacc4\uc815\uc73c\ub85c \ub85c\uadf8\uc778"]})]})]})]}))}var I=a(31),F=a.n(I);function T(e){var t=e.signIn,a=e.handleFormChange;return Object(j.jsxs)("p",{className:F.a.paragraph,children:[t?"\uacc4\uc815\uc774 \uc5c6\uc73c\uc2e0\uac00\uc694?":"\uacc4\uc815\uc774 \uc788\uc73c\uc2e0\uac00\uc694?",Object(j.jsx)("button",{className:F.a.button,type:"button",onClick:a,children:t?"\ud68c\uc6d0\uac00\uc785":"\ub85c\uadf8\uc778"})]})}var y=a(32),R=a.n(y);function k(){var e=A(),t=Object(c.a)(e,3),a=t[0],n=t[1],s=t[2],i=A(),u=Object(c.a)(i,3),b=u[0],d=u[1],p=u[2],m=A(),_=Object(c.a)(m,3),h=_[0],O=_[1],f=_[2],x=Object(r.useState)(!0),N=Object(c.a)(x,2),E=N[0],P=N[1],C=Object(r.useState)(""),S=Object(c.a)(C,2),I=S[0],F=S[1],y=function(){var e=Object(g.a)(v.a.mark((function e(t){var r,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!E){e.next=7;break}return e.next=5,o.signInWithEmailAndPassword(b,h);case 5:e.next=13;break;case 7:if(a.trim()){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,o.createUserWithEmailAndPassword(b,h);case 11:n=e.sent,null===(r=n.user)||void 0===r||r.updateProfile({displayName:a});case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0),F(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.signInWithPopup(l);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),F(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:R.a.wrapper,children:Object(j.jsxs)("div",{className:R.a.container,children:[Object(j.jsx)(w,{onSubmit:y,signIn:E,bindNickname:s,bindEmail:p,bindPassword:f,handleGoogleAuth:k,error:I}),Object(j.jsx)(T,{signIn:E,handleFormChange:function(){P((function(e){return!e})),n(""),d(""),O(""),F("")}})]})})}var D=a(19),H=a(33),L=a.n(H);function M(){return Object(j.jsx)("header",{className:L.a.header,children:Object(j.jsx)("button",{className:L.a.button,onClick:function(){o.signOut()},children:Object(j.jsx)(D.c,{})})})}var G=a(17),U=a.n(G);function W(e){var t=e.message,a=t.text,r=t.createdAt,n=t.photoURL,c=t.name,s=e.self;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"".concat(U.a.wrapper," ").concat(s&&U.a.self),children:[!s&&Object(j.jsxs)(j.Fragment,{children:[n?Object(j.jsx)("img",{className:U.a.img,src:n,alt:"\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0"}):Object(j.jsx)(D.a,{className:U.a.icon}),Object(j.jsx)("p",{children:c})]}),Object(j.jsxs)("article",{className:U.a.article,children:[Object(j.jsx)("p",{className:"".concat(U.a.text," ").concat(s&&U.a.self),children:a}),Object(j.jsx)("span",{className:U.a.timestamp,children:r})]})]})})}var K=a(39),z=a(23),B=a.n(z);function q(e){var t=e.setError,a=A(),r=Object(c.a)(a,3),n=r[0],i=r[1],o=r[2],l=p().user,b=function(){var e=Object(g.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n.trim()){e.next=3;break}return e.abrupt("return");case 3:return i(""),e.prev=4,e.next=7,u.collection("messages").add({creatorId:null===l||void 0===l?void 0:l.uid,createdAt:(new Date).toLocaleTimeString().slice(0,-3),name:null===l||void 0===l?void 0:l.displayName,text:n,photoURL:null===l||void 0===l?void 0:l.photoURL,timestamp:s.a.firestore.FieldValue.serverTimestamp()});case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0),t(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("form",{className:B.a.form,onSubmit:b,children:[Object(j.jsx)("button",{className:B.a.button,type:"button",children:Object(j.jsx)(D.b,{})}),Object(j.jsx)("input",Object(N.a)({className:B.a.input,type:"text"},o)),Object(j.jsx)("button",{className:B.a.button,type:"button",children:Object(j.jsx)(D.d,{})}),Object(j.jsx)("button",{className:B.a.button,type:"button",children:Object(j.jsx)(K.a,{})})]})}var J=a(24),V=a.n(J);function Y(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),a=t[0],n=t[1],s=Object(r.useRef)(null),i=p().user,o=Object(r.useState)(!0),l=Object(c.a)(o,2),b=l[0],d=l[1],m=Object(r.useState)(""),_=Object(c.a)(m,2),h=_[0],O=_[1];return Object(r.useEffect)((function(){return u.collection("messages").orderBy("timestamp","asc").onSnapshot({next:function(e){var t=e.docs;n(t.map((function(e){return Object(N.a)({id:e.id},e.data())}))),d(!1)},error:function(e){console.error(e),O(e.message)}})}),[]),Object(r.useEffect)((function(){var e=s.current;if(e){var t=e.scrollHeight,a=e.clientHeight;e.scrollTop=t-a}}),[a]),Object(r.useEffect)((function(){var e=setTimeout((function(){O("")}),5e3);return function(){clearTimeout(e)}}),[h]),b?Object(j.jsx)(f,{}):Object(j.jsx)("div",{className:V.a.wrapper,children:Object(j.jsxs)("div",{className:V.a.container,children:[Object(j.jsx)(M,{}),Object(j.jsx)("main",{className:V.a.main,ref:s,children:Object(j.jsx)("div",{className:V.a.mainInner,children:a.map((function(e){var t=e.id,a=e.creatorId;return(null===i||void 0===i?void 0:i.uid)===a?Object(j.jsx)(W,{message:e,self:!0},t):Object(j.jsx)(W,{message:e},t)}))})}),h&&Object(j.jsx)("p",{className:V.a.error,children:h}),Object(j.jsx)(q,{setError:O})]})})}function Q(){var e=p(),t=e.user;return e.init?Object(j.jsx)(f,{init:!0}):Object(j.jsx)(m.a,{children:Object(j.jsx)(_.c,{children:Object(j.jsx)(_.a,{path:"/",exact:!0,children:t?Object(j.jsx)(Y,{}):Object(j.jsx)(k,{})})})})}Object(n.render)(Object(j.jsx)(r.StrictMode,{children:Object(j.jsx)(d,{children:Object(j.jsx)(Q,{})})}),document.querySelector("#root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.eba2b796.chunk.js.map